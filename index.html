<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jude's Timekeeper</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <div class="logo">JT</div>
      <div>
        <h1>Jude's Timekeeper</h1>
        <p>Local, offline time tracking</p>
      </div>
    </div>
    <div class="header-actions">
      <button id="export-data" class="ghost">
        Save to iCloud
        <span id="save-stamp" class="stamp">Never</span>
      </button>
      <button id="export-github" class="ghost">
        Save to GitHub
        <span id="github-stamp" class="stamp">Never</span>
      </button>
      <label class="ghost file">
        Load from iCloud
        <input type="file" id="import-data" accept="application/json" />
        <span id="load-stamp" class="stamp">Never</span>
      </label>
      <button id="backup-close" class="ghost danger">Backup & Close</button>
    </div>
  </header>

  <nav class="tabs" role="tablist">
    <button class="tab active" data-tab="entries">Time Entries</button>
    <button class="tab" data-tab="clients">Clients</button>
    <button class="tab" data-tab="invoices">Invoices</button>
    <button class="tab" data-tab="stats">Statistics</button>
    <button class="tab" data-tab="owed">Money Owed</button>
    <button class="tab" data-tab="payments">Payments</button>
  </nav>

  <main>
    <section id="tab-entries" class="tab-panel active">
      <div class="panel-header">
        <h2>Time Entries</h2>
        <button id="add-entry" class="primary">Add Entry</button>
      </div>
      <div class="search-row">
        <input id="search-entries" type="search" placeholder="Search entries..." />
      </div>
      <p class="hint">Tip: Use “Save to iCloud” to store a JSON file in iCloud Drive, then “Load from iCloud” on another device.</p>
      <div class="card">
        <table id="entries-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Hours</th>
              <th>Client</th>
              <th>Notes</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="tab-clients" class="tab-panel">
      <div class="panel-header">
        <h2>Clients</h2>
        <button id="add-client" class="primary">Add Client</button>
      </div>
      <div class="search-row">
        <input id="search-clients" type="search" placeholder="Search clients..." />
      </div>
      <div class="card">
        <table id="clients-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Hourly Rate (EUR)</th>
              <th>Notes</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="tab-invoices" class="tab-panel">
      <div class="panel-header">
        <h2>Invoices</h2>
        <button id="add-invoice" class="primary">Create Invoice</button>
      </div>
      <div class="search-row">
        <input id="search-invoices" type="search" placeholder="Search invoices..." />
      </div>
      <div class="card">
        <table id="invoices-table">
          <thead>
            <tr>
              <th>Invoice #</th>
              <th>Client</th>
              <th>Period</th>
              <th>Total (EUR)</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="tab-stats" class="tab-panel">
      <div class="panel-header">
        <h2>Statistics</h2>
      </div>
      <div class="grid">
        <div class="stat accent-dark">
          <p>Today</p>
          <h3 id="stat-today">€0.00</h3>
        </div>
        <div class="stat accent-green">
          <p>This Month</p>
          <h3 id="stat-month">€0.00</h3>
        </div>
        <div class="stat accent-orange">
          <p>This Year</p>
          <h3 id="stat-year">€0.00</h3>
        </div>
        <div class="stat">
          <p>Money Owed</p>
          <h3 id="stat-owed">€0.00</h3>
        </div>
      </div>
      <div class="card chart-card">
        <div class="chart-header">
          <h3>Performance Overview</h3>
          <span class="muted">Live totals</span>
        </div>
        <div id="stats-chart" class="stats-chart"></div>
        <div class="chart-header">
          <h3>Client Breakdown</h3>
          <span class="muted">Income by client</span>
        </div>
        <div class="pie-wrap">
          <div id="client-pie" class="pie-chart"></div>
          <div id="client-legend" class="pie-legend"></div>
        </div>
      </div>
    </section>

    <section id="tab-owed" class="tab-panel">
      <div class="panel-header">
        <h2>Money Owed by Client</h2>
      </div>
      <div class="search-row">
        <input id="search-owed" type="search" placeholder="Search balances..." />
      </div>
      <div class="card">
        <table id="owed-table">
          <thead>
            <tr>
              <th>Client</th>
              <th>Invoiced (EUR)</th>
              <th>Paid (EUR)</th>
              <th>Owed (EUR)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="tab-payments" class="tab-panel">
      <div class="panel-header">
        <h2>Payments</h2>
        <button id="add-payment" class="primary">Add Payment</button>
      </div>
      <div class="search-row">
        <input id="search-payments" type="search" placeholder="Search payments..." />
      </div>
      <div class="card">
        <table id="payments-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Client</th>
              <th>Method</th>
              <th>Amount (EUR)</th>
              <th>Notes</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <dialog id="entry-modal" class="modal">
    <form method="dialog" class="modal-content" id="entry-form">
      <h3>New Time Entry</h3>
      <label>Date<input type="date" id="entry-date" required></label>
      <label>Hours<input type="number" id="entry-hours" step="0.25" min="0" required></label>
      <label>Client<select id="entry-client"></select></label>
      <label>Notes<textarea id="entry-notes" rows="3"></textarea></label>
      <menu>
        <button value="cancel" class="ghost">Cancel</button>
        <button value="default" class="primary" id="save-entry">Save</button>
      </menu>
    </form>
  </dialog>

  <dialog id="client-modal" class="modal">
    <form method="dialog" class="modal-content" id="client-form">
      <h3>New Client</h3>
      <label>Name<input type="text" id="client-name" required></label>
      <label>Hourly Rate (EUR)<input type="number" id="client-rate" step="0.01" min="0" required></label>
      <label>Notes<textarea id="client-notes" rows="3"></textarea></label>
      <menu>
        <button value="cancel" class="ghost">Cancel</button>
        <button value="default" class="primary" id="save-client">Save</button>
      </menu>
    </form>
  </dialog>

  <dialog id="invoice-modal" class="modal">
    <form method="dialog" class="modal-content" id="invoice-form">
      <h3>Create Invoice</h3>
      <label>Invoice #<input type="text" id="invoice-number" required></label>
      <label>Client<select id="invoice-client"></select></label>
      <label>Start Date<input type="date" id="invoice-start" required></label>
      <label>End Date<input type="date" id="invoice-end" required></label>
      <label>Notes<textarea id="invoice-notes" rows="3"></textarea></label>
      <menu>
        <button value="cancel" class="ghost">Cancel</button>
        <button value="default" class="primary" id="save-invoice">Generate</button>
      </menu>
      <p class="hint">After generating, click “Print” to save as PDF.</p>
    </form>
  </dialog>

  <dialog id="payment-modal" class="modal">
    <form method="dialog" class="modal-content" id="payment-form">
      <h3>New Payment</h3>
      <label>Date<input type="date" id="payment-date" required></label>
      <label>Client<select id="payment-client"></select></label>
      <label>Method
        <select id="payment-method">
          <option value="Cash">Cash</option>
          <option value="Bank Transfer">Bank Transfer</option>
        </select>
      </label>
      <label>Amount (EUR)<input type="number" id="payment-amount" step="0.01" min="0" required></label>
      <label>Notes<textarea id="payment-notes" rows="3"></textarea></label>
      <menu>
        <button value="cancel" class="ghost">Cancel</button>
        <button value="default" class="primary" id="save-payment">Save</button>
      </menu>
    </form>
  </dialog>

  <dialog id="invoice-print" class="modal">
    <div class="modal-content printable" id="invoice-print-content"></div>
    <menu>
      <button id="close-print" class="ghost">Close</button>
      <button id="print-invoice" class="primary">Print / Save PDF</button>
    </menu>
  </dialog>

  <script src="app.js"></script>
</body>
</html>
